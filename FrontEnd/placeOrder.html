<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Point of Sale</title>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
    <link href="https://unpkg.com/ionicons@4.5.0/dist/css/ionicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="plugins/Ionicons/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="dist/css/adminlte.min.css">
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="dist/css/style.css">
</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">

        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand bg-white navbar-light border-bottom">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fa fa-bars"></i></a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="placeOrder.html" class="nav-link">Place Orders</a>
                </li>
            </ul>




            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">

                <li class="nav-item">
                    <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#"><i class="fa fa-th-large"></i></a>
                </li>
            </ul>
        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="index3.html" class="brand-link">
                <img src="dist/img/pos.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
                <span class="brand-text font-weight-light">Point Of Sale</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user panel (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="dist/img/malaka.jpg" class="img-circle elevation-2" alt="User Image">
                    </div>
                    <div class="info">
                        <a href="#" class="d-block">Malaka Madushan</a>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                        <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->

                        <li class="nav-item">
                            <a href="index.html" class="nav-link ">
                                <i class=" nav-icon  fa fa-dashboard"></i>
                                <p>
                                    Dashbord
                                </p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="customer.html" class="nav-link ">
                                <!-- <i class="nav-icon fa fa-th"></i> -->
                                <i class=" nav-icon  fa fa-fw fa-group"></i>
                                <p>
                                    Customers
                                    <!-- <span class="right badge badge-danger">New</span> -->
                                </p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="items.html" class="nav-link ">
                                <!-- <i class="nav-icon fa fa-th"></i> -->
                                <i class="nav-icon fa fa-fw fa-cart-plus"></i>
                                <p>
                                    Items
                                    <!-- <span class="right badge badge-danger">New</span> -->
                                </p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="placeOrder.html" class="nav-link active">
                                <i class=" nav-icon fa fa-th"></i>
                                <p>
                                    Place Orders
                                    <!-- <span class="right badge badge-danger">New</span> -->
                                </p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fa fa-fw fa-file-text-o"></i>
                                <p>
                                    Order Details
                                    <!-- <span class="right badge badge-danger">New</span> -->
                                </p>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0 text-dark">Place Orders</h1>

                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">PlaceOrder Page</li>
                            </ol>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>
        
       
    
    
            <!-- /.content-header -->

            <!-- Main content -->
            <div class="content">
                    <div class="container-fluid">
                            <!-- <div class="row ">
                                    <div class="col-md-12">
                                            <button id="btnNewOrder" class="btn btn-success"><i class="fas fa-plus"></i> New Order</button>
                                    </div>
                                        
                                </div> -->
                                <div class="col-md-12">
                                        <button id="btnNewOrder" class="btn btn-success"><i class="fa fa-plus"></i> New Order</button>
                                </div><br><br><br>
                            <div class="row">
                                    
                                <div id="col1" class="col-md-4">
                                    <div id="order-details" class="alert alert-warning">
                                        <div>Order ID: <label id="lblOrderId"></label></div>
                                        <div>Order Date: <label id="lblOrderDate"></label></div>
                                    </div>
                                    <div class="alert alert-primary">
                                        <div class="form-group">
                                            Customer ID:
                                            <select id="cmbCustomerID" class="form-control">
                                                <option selected disabled hidden value="">Select Customer ID</option>
                                            </select>
                                        </div>
                                        <div>Customer Name: <label id="lblCustomerName"></label></div>
                                    </div>
                                    <div id="item-container" class="alert alert-dark">
                                        <div class="form-group">
                                            Item Code:
                                            <select id="cmbItemCode" class="form-control">
                                                <option selected disabled hidden value="">Select Item Code</option>
                                            </select>
                                        </div>
                                        <div id="item-details">
                                            <div>Item Description: <label id="lblItemDescription"></label></div>
                                            <div>Unit Price: <label id="lblUnitPrice"></label></div>
                                            <div>Qty. On Hand: <label id="lblQtyOnHand"></label></div>
                                        </div>
                                        <div class="form-group">
                                            Qty.
                                            <input class="form-control" type="number" id="txtQty" min="0">
                                        </div>
                                        <div>
                                            <button id="btnAddCart" class="btn btn-warning"> <i class="fa fa-cart-plus"></i> Add to Cart</button>
                                        </div>
                                    </div>
                    
                                </div>
                                <div id="col2" class="col-md-8">
                                    <div class="alert alert-primary">
                                        <div id="tblContainer" class="table-dark">
                                            <table id="tblOrderDetails" class="table table-hover table-dark">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center">Item Code</th>
                                                        <th>Description</th>
                                                        <th class="text-right">Unit Price</th>
                                                        <th class="text-center">Qty</th>
                                                        <th class="text-right">Total</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div>
                                            <span id="spnTotal">Total: <label id="lblTotal">0.0</label></span>
                                            <button id="btnPlaceOrder" class="btn btn-primary"> <i class="fa fa-cart-arrow-down"></i>
                                                Place Order</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <h3 class="text-center">Order Details</h3>
                                </div>
                                <table id="tblOrders" class="table table-bordered table-hover">
                                    <colgroup>
                                        <col style="width: 120px; text-align: center;">
                                        <col style="width: 250px; text-align: center;">
                                        <col>
                                        <col>
                                        <col style="width: 150px;">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th class="text-center">Order ID</th>
                                            <th class="text-center">Order Date</th>
                                            <th class="text-center">Customer ID</th>
                                            <th class="text-center">Customer Name</th>
                                            <th class="text-right">Order Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>


            </div>
        </div>

        </div>

    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
        <div class="p-3">
            <h5><i class="fa fa-gears"></i>&nbsp; Setting</h5>
            <p>LogOut</p>
        </div>
    </aside>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->
    <footer class="main-footer">

        <!-- Default to the left -->
        <strong>Copyright &copy; 2018 2019 <a href="#">Direct Entity program</a>.</strong> All rights reserved.
    </footer>
    </div>
    <!-- ./wrapper -->

    <!-- REQUIRED SCRIPTS -->

    <script src="plugins/jquery/jquery.min.js"></script>
    <script src="plugins/jquery/jquery.js"></script>
    <script src="plugins/jQueryUI/jquery-ui.min.js"></script>
    <!-- Bootstrap 4 -->
    <!--<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>-->
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>

    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>

    <script src="plugins/fastclick/fastclick.js"></script>
    <script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- AdminLTE App -->
    <script src="dist/js/adminlte.min.js"></script>
    <!--data table-->
    <script src="plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="plugins/datatables/dataTables.bootstrap4.js"></script>
    <script src="plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="dist/js/date-formatter.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script>
        // $(function () {
        //     $('#tblOrders').DataTable({
        //         'paging': true,
        //         'lengthChange': false,
        //         'searching': true,
        //         'ordering': true,
        //         'info': true,
        //         'autoWidth': true,
        //         language: {
        //             search: "_INPUT_",
        //             searchPlaceholder: "Search Items...",
        //
        //         }
        //     });
        // });
    </script>

    <script>

        $(document).ready(function () {
            loadAllOrders();
            setToday();
            ordercount();
            loadCustomers();
            loadItems();
        });


        function ordercount() {
            var ajaxConfig = {
                method: "HEAD",
                url: "http://localhost:3000/api/v1/items",
                async: true,
            }
            $.ajax(ajaxConfig).done(function (responseText, statusText, jxhr) {
                var orderCount = jxhr.getResponseHeader("X-count");
                $("#lblOrderId").text(orderCount);

            }).fail(function (jxhr, statustext, error) {

            });
        };

        function setToday() {
            var today = new Date();
            var formattedDate = today.format("yyyy-mm-dd");
            $("#lblOrderDate").text(formattedDate);
        }



        function loadAllOrders(){

            // $("#tblItems").dataTable().fnDestroy();
            // $("#tblItems tbody tr").remove();

            var ajaxConfig = {
                method: "GET",
                url: "http://localhost:3000/api/v1/orders",
                async: true,
            }
            $.ajax(ajaxConfig).done(function (orders, statusText, jxhr) {

                orders.forEach(function (order) {

                    var html = `<tr>
                               <td>${order.order_id}</td>
                               <td>${order.order_date}</td>
                               <td>${order.cus_id}</td>
                               <td>${order.cus_name}</td>
                               <td></td>


                            </tr>`;
                    $("#tblOrders tbody").append(html);
                })

                // $('#tblOrders').DataTable({
                //     'paging': true,
                //     'lengthChange': false,
                //     'searching': true,
                //     'ordering': true,
                //     'info': true,
                //     'autoWidth': true,
                //     'pageLength': 10,
                //     language: {
                //         search: "_INPUT_",
                //         searchPlaceholder: "Search Order..."
                //
                //     }
                // });


            }).fail(function (jxhr, statusText, error) {

            });

        }


        function loadCustomers() {

            var ajaxConfig = {
                method: "GET",
                url: "http://localhost:3000/api/v1/customers",
                async: true
            }

            $.ajax(ajaxConfig).done(function(response,statusText,jxhr){
                    console.log(response);

                response.forEach(function(element){
                    console.log(response);
                    $("#cmbCustomerID").append(`<option value="${element.cus_id}">
                                                ${element.cus_id}
                                                </option>`);

                });

                $("#cmbCustomerID").change(function(){

                    var ajaxConfig = {
                        method: "GET",
                        url: "http://localhost:3000/api/v1/customers/" + $(this).val(),
                        async: true
                    }

                    $.ajax(ajaxConfig).done(function(response, statusText, jxhr){
                            console.log(response.cus_name);
                        $("#lblCustomerName").text(response.cus_name);

                    }).fail(function(jxhr, statusText, error){

                    });

                });

            }).fail(function(jxhr,statusText,error){

            });
        }


        function loadItems() {

            var ajaxConfig = {
                method: "GET",
                url: "http://localhost:3000/api/v1/items",
                async: true
            }

            $.ajax(ajaxConfig).done(function(response,statusText,jxhr){

                response.forEach(function(element){

                    $("#cmbItemCode").append(`<option value="${element.item_code}">
                                                ${element.item_code}
                                                </option>`);

                });

                $("#cmbItemCode").change(function(){

                    var ajaxConfig = {
                        method: "GET",
                        url: "http://localhost:3000/api/v1/items/" + $(this).val(),
                        async: true
                    }

                    $.ajax(ajaxConfig).done(function(response, statusText, jxhr){

                        $("#lblItemDescription").text(response.description);
                        $("#lblUnitPrice").text(response.unitprice);
                        $("#lblQtyOnHand").text(response.quantity);


                    }).fail(function(jxhr, statusText, error){

                    });

                });

            }).fail(function(jxhr,statusText,error){

            });

        }
        var tempDB = [];

        $("#btnAddCart").click(function () {

            var itemCode = $("#cmbItemCode").val();
            var itemDescription = $("#lblItemDescription").text();
            var unitPrice = parseFloat($("#lblUnitPrice").text());
            var qty_onHand = $("#lblQtyOnHand").text();
            var qty = parseInt($("#txtQty").val());
            var total = unitPrice * qty;

            if ($("#lblCustomerName").text() == "") {
                alert("Please select a Customer");
                return;
            }

            if ($("#lblItemDescription").text() == "" || $("#lblUnitPrice").text() == "" || $("#lblQtyOnHand").text() == "") {
                alert("Please select a Item");
                return;
            }

            if ($("#txtQty").val() == "") {
                alert("Please Enter a quantity");
                return;
            }

            var typedQty = $("#txtQty").val();
            if (typedQty > qty_onHand) {
                alert("Please Enter a valid quantity");
                $("#txtQty").focus();
                $("#txtQty").select();
                return;
            }

            if (typedQty < 0) {
                alert("Please Enter a valid quantity");
                $("#txtQty").focus();
                $("#txtQty").select();
                return;
            }


            // var items ;


            // if (qty <= 0 || qty > item.qtyOnHand) {
            // alert("Invalid Qty");
            // $("#txtQty").addClass('invalid-qty');
            // return;
            // }

            $("#txtQty").removeClass('invalid-qty');

            var currentRow = isItemExists(itemCode);

        <!-- Determines whether I want to update or add-->
            if ($("#btnAddCart").text().trim() == "Update Cart") {
           // Update
            var currentQty = parseInt($(currentRow).find("td:nth-child(4)").text());
            // item.qtyOnHand += currentQty;
            $(currentRow).find("td:nth-child(4)").text(qty);
            $(currentRow).find("td:nth-child(5)").text(total);
            calculateTotal();

            // item.qtyOnHand -= qty;
            $("#btnAddCart").html('<i class="fas fa-cart-plus"></i> Add to Cart');
            $("#cmbItemCode").val("").trigger("change");
            $("#cmbItemCode").attr("disabled", false);
            $("#txtQty").attr("disabled",false);

            return;
            }


            if (currentRow) {
            var currentQty = parseInt($(currentRow).find("td:nth-child(4)").text());
            currentQty += qty;
            total = unitPrice * currentQty;
            $(currentRow).find("td:nth-child(4)").text(currentQty);
            $(currentRow).find("td:nth-child(5)").text(total);
            calculateTotal();

            // item.qtyOnHand -= qty;
            $("#cmbItemCode").val("").trigger("change");

            return;
            }

            var html = `<tr>
            <td class="text-center">${itemCode}</td>
                <td>${itemDescription}</td>
                <td class="text-right">${unitPrice}</td>
                <td class="text-center">${qty}</td>
                <td class="text-right">${total}</td>
                <td><button type="button" class="btn btn-danger delete">Delete</button></td>
            </tr>`;

            // item.qtyOnHand -= qty;
            $("#tblOrderDetails tbody").append(html);

            calculateTotal();
            $("#cmbItemCode").val("").trigger("change");

            $("#tblOrderDetails tbody tr").off("click");
            $("#tblOrderDetails tbody tr").click(function () {
            var itemCode = $(this).find("td:first-child").text();
            var qty = parseInt($(this).find("td:nth-child(4)").text());
            $("#cmbItemCode").val(itemCode).trigger("change");
            $("#txtQty").val(qty);
            $("#btnAddCart").html('<i class="fas fa-cart-plus"></i> Update Cart');
            $("#cmbItemCode").attr("disabled", true);
            });

            $("#tblOrderDetails .delete").off("click");
            $("#tblOrderDetails .delete").click(function (eventData) {
            eventData.stopPropagation();
            if (confirm("Are you sure that you want to delete this item?")) {
            var qty = parseInt($(this).parents("tr").find("td:nth-child(4)").text());
            var itemCode = $(this).parents("tr").find("td:first-child").text();
            // var items ;
            //     if (loadItems() instanceof itemCode) {
            //         items =itemCode;
            //     };
            // item.qtyOnHand += qty;

            $(this).fadeOut(500, function () {
            $(this).parents("tr").remove();
            calculateTotal();
            });
            }
            });

            //
            // var orderDetail = {
            //     description: $("#lblItemDescription").text(),
            //     unitprice : $("#lblUnitPrice").text(),
            //     quantity: $("#txtQty").val(),
            //     order_id: $("#lblOrderId").text(),
            //     item_code: $("#cmbItemCode").val(),
            //
            // }
            //
            //
            // var ajaxConfig = {
            //     method: "POST",
            //     url: "http://localhost:3000/api/v1/order_details",
            //     async: true,
            //     contentType: "application/json",
            //     data: JSON.stringify(orderDetail)
            // }
            // console.log(ajaxConfig);
            // $.ajax(ajaxConfig).done(function (response, statusTexr, jxhr) {
            //
            //     alert("Added Successfully");
            //     loadAllOrderDetails
            //     $('button[type="reset"]').trigger("click");
            // }).fail(function (jxhr, statusText, error) {
            //     alert("Unable to save the Order Details, try again");
            //     console.log(error);
            // });
        });

        // function findItem(itemCode) {
        // for (var index in ITEMS) {
        // var item = ITEMS[index];
        // if (item.code == itemCode) {
        // return item;
        // }
        // }





        function isItemExists(code) {
        var flag = null;
        $("#tblOrderDetails tbody tr").each(function () {
        var itemCode = $(this).find("td:first-child").text();
        if (itemCode == code) {
        flag = this;
        return;
        }
        });
        return flag;
        }

        function calculateTotal() {
         var total = 0.0;
        $("#tblOrderDetails tbody tr").each(function () {
        total += parseFloat($(this).find("td:nth-child(5)").text());
        });
        $("#lblTotal").text(total);
        }





        function loadAllOrderDetails() {
           var ajaxConfig = {
               method: "GET",
               url: "http://localhost:3000/api/v1/items",
               async: true,
           }
           $.ajax(ajaxConfig).done(function (orderdetails, statusText, jxhr) {
              console.log(orderdetails);
               orderdetails.forEach(function (orderdetail) {

                   var html = `<tr>
                               <td>${orderdetail.description}</td>
                               <td>${orderdetail.unitprice}</td>
                               <td>${orderdetail.quantity}</td>

                               <!--<td><button type="button" class="btn btn-danger delete">Delete</button></td>-->


                            </tr>`;
                   $("#tblOrderDetails tbody").append(html);
               });
           }).fail(function (jxhr, statusText, erroe) {

           });
       }

    </script>






    <!--<script>-->

        <!--function setToday() {-->
            <!--var today = new Date();-->
            <!--// Just need to parse the format that you need-->
            <!--var formattedDate = today.format("yyyy-mm-dd");-->
            <!--$("#lblOrderDate").text(formattedDate);-->
        <!--}-->

        <!--setToday();-->

        <!--var ordersDetails = [];-->

        <!--$(document).ready(function () {-->

            <!--for (var i = 0; i < CUSTOMERS.length; i++) {-->
                <!--$("#cmbCustomerID").append('<option value="' + CUSTOMERS[i].id + '">' + CUSTOMERS[i].id + '</option>')-->
            <!--}-->

            <!--for (var i = 0; i < ITEMS.length; i++) {-->
                <!--$("#cmbItemCode").append('<option value="' + ITEMS[i].code + '">' + ITEMS[i].code + '</option>')-->
            <!--}-->

            <!--reset();-->

        <!--});-->

        <!--function findCustomer(customerId) {-->
            <!--for (var index in CUSTOMERS) {-->
                <!--var customer = CUSTOMERS[index];-->
                <!--if (customer.id == customerId) {-->
                    <!--return customer;-->
                <!--}-->
            <!--}-->
        <!--}-->

        <!--function findItem(itemCode) {-->
            <!--for (var index in ITEMS) {-->
                <!--var item = ITEMS[index];-->
                <!--if (item.code == itemCode) {-->
                    <!--return item;-->
                <!--}-->
            <!--}-->
        <!--}-->

        <!--$("#btnNewOrder").click(function () {-->

            <!--$("#tblOrderDetails tbody tr").each(function () {-->
                <!--var itemCode = $(this).find("td:first-child").text().trim();-->
                <!--var qty = parseInt($(this).find('td:nth-child(4)').text().trim());-->
                <!--var item = findItem(itemCode);-->
                <!--item.qtyOnHand += qty;-->
            <!--});-->

            <!--reset();-->

            <!--var lastOrderId = $("#tblOrders tbody tr:last-child td:first-child").text();-->
            <!--var orderId = 1;-->
            <!--if (lastOrderId) {-->
                <!--orderId = parseInt(lastOrderId) + 1;-->
            <!--}-->
            <!--$("#lblOrderId").text(orderId);-->

            <!--$("#cmbCustomerID").attr("disabled", false);-->
            <!--$("#cmbItemCode").attr("disabled", false);-->
            <!--$("#btnAddCart").attr("disabled", false);-->
            <!--$("#txtQty").attr("disabled", false);-->
            <!--$("#btnPlaceOrder").attr("disabled", false);-->
        <!--});-->

        <!--$("#cmbCustomerID").change(function () {-->
            <!--var customerId = $(this).val();-->
            <!--if (!customerId) {-->
                <!--customerName = "";-->
            <!--} else {-->
                <!--var customerName = findCustomer(customerId).name;-->
            <!--}-->
            <!--$("#lblCustomerName").text(customerName);-->
        <!--});-->

        <!--$("#cmbItemCode").change(function () {-->
            <!--var itemCode = $(this).val();-->
            <!--if (itemCode) {-->
                <!--var item = findItem(itemCode);-->
                <!--$("#lblItemDescription").text(item.description);-->
                <!--$("#lblUnitPrice").text(item.unitPrice);-->
                <!--$("#lblQtyOnHand").text(item.qtyOnHand);-->
            <!--} else {-->
                <!--$("#lblItemDescription").text("");-->
                <!--$("#lblUnitPrice").text("");-->
                <!--$("#lblQtyOnHand").text("");-->
                <!--$("#txtQty").val("");-->
            <!--}-->
        <!--});-->

        <!--$("#btnAddCart").click(function () {-->

            <!--var itemCode = $("#cmbItemCode").val();-->
            <!--var itemDescription = $("#lblItemDescription").text();-->
            <!--var unitPrice = parseFloat($("#lblUnitPrice").text());-->
            <!--var qty = parseInt($("#txtQty").val());-->
            <!--var total = unitPrice * qty;-->
            <!--var item = findItem(itemCode);-->

            <!--if (qty <= 0 || qty > item.qtyOnHand) {-->
                <!--alert("Invalid Qty");-->
                <!--$("#txtQty").addClass('invalid-qty');-->
                <!--return;-->
            <!--}-->

            <!--$("#txtQty").removeClass('invalid-qty');-->

            <!--var currentRow = isItemExists(itemCode);-->

            <!--// Determines whether I want to update or add-->
            <!--if ($("#btnAddCart").text().trim() == "Update Cart") {-->
                <!--// Update-->
                <!--var currentQty = parseInt($(currentRow).find("td:nth-child(4)").text());-->
                <!--item.qtyOnHand += currentQty;-->
                <!--$(currentRow).find("td:nth-child(4)").text(qty);-->
                <!--$(currentRow).find("td:nth-child(5)").text(total);-->
                <!--calculateTotal();-->

                <!--item.qtyOnHand -= qty;-->
                <!--$("#btnAddCart").html('<i class="fas fa-cart-plus"></i> Add to Cart');-->
                <!--$("#cmbItemCode").val("").trigger("change");-->
                <!--$("#cmbItemCode").attr("disabled", false);-->
                <!--// $("#txtQty").attr("disabled",false);-->

                <!--return;-->
            <!--}-->


            <!--if (currentRow) {-->
                <!--var currentQty = parseInt($(currentRow).find("td:nth-child(4)").text());-->
                <!--currentQty += qty;-->
                <!--total = unitPrice * currentQty;-->
                <!--$(currentRow).find("td:nth-child(4)").text(currentQty);-->
                <!--$(currentRow).find("td:nth-child(5)").text(total);-->
                <!--calculateTotal();-->

                <!--item.qtyOnHand -= qty;-->
                <!--$("#cmbItemCode").val("").trigger("change");-->

                <!--return;-->
            <!--}-->

            <!--var html = `<tr>-->
                            <!--<td class="text-center">${itemCode}</td>-->
                            <!--<td>${itemDescription}</td>-->
                            <!--<td class="text-right">${unitPrice}</td>-->
                            <!--<td class="text-center">${qty}</td>-->
                            <!--<td class="text-right">${total}</td>-->
                            <!--<td><div class="icon-delete"></div></td>-->
                        <!--</tr>`;-->

            <!--item.qtyOnHand -= qty;-->
            <!--$("#tblOrderDetails tbody").append(html);-->

            <!--calculateTotal();-->
            <!--$("#cmbItemCode").val("").trigger("change");-->

            <!--$("#tblOrderDetails tbody tr").off("click");-->
            <!--$("#tblOrderDetails tbody tr").click(function () {-->
                <!--var itemCode = $(this).find("td:first-child").text();-->
                <!--var qty = parseInt($(this).find("td:nth-child(4)").text());-->
                <!--$("#cmbItemCode").val(itemCode).trigger("change");-->
                <!--$("#txtQty").val(qty);-->
                <!--$("#btnAddCart").html('<i class="fas fa-cart-plus"></i> Update Cart');-->
                <!--$("#cmbItemCode").attr("disabled", true);-->
            <!--});-->

            <!--$("#tblOrderDetails .icon-delete").off("click");-->
            <!--$("#tblOrderDetails .icon-delete").click(function (eventData) {-->
                <!--eventData.stopPropagation();-->
                <!--if (confirm("Are you sure that you want to delete this item?")) {-->
                    <!--var qty = parseInt($(this).parents("tr").find("td:nth-child(4)").text());-->
                    <!--var itemCode = $(this).parents("tr").find("td:first-child").text();-->
                    <!--var item = findItem(itemCode);-->
                    <!--item.qtyOnHand += qty;-->

                    <!--$(this).fadeOut(500, function () {-->
                        <!--$(this).parents("tr").remove();-->
                        <!--calculateTotal();-->
                    <!--});-->
                <!--}-->
            <!--});-->



        <!--});-->

        <!--function isItemExists(code) {-->
            <!--var flag = null;-->
            <!--$("#tblOrderDetails tbody tr").each(function () {-->
                <!--var itemCode = $(this).find("td:first-child").text();-->
                <!--if (itemCode == code) {-->
                    <!--flag = this;-->
                    <!--return;-->
                <!--}-->
            <!--});-->
            <!--return flag;-->
        <!--}-->

        <!--function calculateTotal() {-->
            <!--var total = 0.0;-->
            <!--$("#tblOrderDetails tbody tr").each(function () {-->
                <!--total += parseFloat($(this).find("td:nth-child(5)").text());-->
            <!--});-->
            <!--$("#lblTotal").text(total);-->
        <!--}-->

        <!--$("#btnPlaceOrder").click(function () {-->

            <!--var rowCount = $("#tblOrderDetails tbody tr").length;-->
            <!--if (rowCount == 0) {-->
                <!--alert("In order to place an order there should be at least one order detail");-->
                <!--return;-->
            <!--}-->

            <!--var orderId = $("#lblOrderId").text().trim();-->
            <!--var orderDate = $("#lblOrderDate").text().trim();-->
            <!--var customerId = $("#cmbCustomerID").val();-->
            <!--var customerName = $("#lblCustomerName").text().trim();-->
            <!--var orderTotal = $("#lblTotal").text().trim();-->

            <!--if (!customerId) {-->
                <!--alert("In order to place an order customer should be selected");-->
                <!--return;-->
            <!--}-->

            <!--$("#tblOrderDetails tbody tr").each(function () {-->

                <!--var itemCode = $(this).find("td:first-child").text();-->
                <!--var description = $(this).find("td:nth-child(2)").text();-->
                <!--var unitPrice = $(this).find("td:nth-child(3)").text();-->
                <!--var qty = $(this).find("td:nth-child(4)").text();-->
                <!--var total = $(this).find("td:nth-child(5)").text();-->

                <!--var orderDetail = {-->
                    <!--orderId: orderId,-->
                    <!--itemCode: itemCode,-->
                    <!--description: description,-->
                    <!--unitPrice: unitPrice,-->
                    <!--qty: qty,-->
                    <!--total: total-->
                <!--};-->

                <!--ordersDetails.push(orderDetail);-->

            <!--});-->

            <!--var html = `<tr>-->
                            <!--<td class="text-center">${orderId}</td>-->
                            <!--<td class="text-center">${orderDate}</td>-->
                            <!--<td class="text-center">${customerId}</td>-->
                            <!--<td>${customerName}</td>-->
                            <!--<td class="text-right">${orderTotal}</td>-->
                        <!--</tr>`;-->

            <!--$("#tblOrders tbody").append(html);-->
            <!--reset();-->

            <!--$("#tblOrders tbody tr").off("click");-->
            <!--$("#tblOrders tbody tr").click(function () {-->
                <!--reset();-->
                <!--var orderId = $(this).find("td:first-child").text();-->
                <!--var orderDate = $(this).find("td:nth-child(2)").text();-->
                <!--var customerId = $(this).find("td:nth-child(3)").text();-->

                <!--$("#lblOrderId").text(orderId);-->
                <!--$("#lblOrderDate").text(orderDate);-->
                <!--$("#cmbCustomerID").val(customerId).trigger("change");-->

                <!--var orderDetails = ordersDetails.filter(function (element) {-->
                    <!--return element.orderId == orderId;-->
                <!--});-->

                <!--for (var i = 0; i < orderDetails.length; i++) {-->
                    <!--var html = `<tr>-->
                                    <!--<td class="text-center">${orderDetails[i].itemCode}</td>-->
                                    <!--<td>${orderDetails[i].description}</td>-->
                                    <!--<td class="text-right">${orderDetails[i].unitPrice}</td>-->
                                    <!--<td class="text-center">${orderDetails[i].qty}</td>-->
                                    <!--<td class="text-right">${orderDetails[i].total}</td>-->
                                    <!--<td><div class="icon-delete icon-disabled"></div></td>-->
                                <!--</tr>`;-->

                    <!--$("#tblOrderDetails tbody").append(html);-->
                <!--}-->
                <!--calculateTotal();-->

                <!--$("#tblOrderDetails tbody tr").click(function () {-->
                    <!--var itemCode = $(this).find("td:first-child").text();-->
                    <!--var qty = parseInt($(this).find("td:nth-child(4)").text());-->
                    <!--$("#cmbItemCode").val(itemCode).trigger("change");-->
                    <!--$("#txtQty").val(qty);-->
                    <!--// $("#btnAddCart").html('<i class="fas fa-cart-plus"></i> Update Cart');-->
                    <!--// $("#cmbItemCode").attr("disabled", true);-->
                <!--});-->

            <!--});-->

        <!--});-->

        <!--function reset() {-->
            <!--$("#lblOrderId").text("");-->
            <!--setToday();-->
            <!--$("#cmbCustomerID").attr("disabled", true);-->
            <!--$("#cmbItemCode").attr("disabled", true);-->
            <!--$("#cmbCustomerID").val("").trigger("change");-->
            <!--$("#cmbItemCode").val("").trigger("change");-->
            <!--$("#txtQty").val("");-->
            <!--$("#txtQty").attr("disabled", true);-->
            <!--$("#btnAddCart").attr("disabled", true);-->
            <!--$("#tblOrderDetails tbody tr").remove();-->
            <!--$("#lblTotal").text("0");-->
            <!--$("#btnPlaceOrder").attr("disabled", true);-->
        <!--}-->

    <!--</script>-->
   </body>

</html>